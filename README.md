# 音频星座可视化程序（生成星星闪烁、移动与连线效果）

这是一个将WAV音频文件转换为星座效果视频的Python程序，根据音乐的节奏和能量，动态生成星星和连线，并向四周运动。

## 效果
程序生成的视频将呈现以下效果：
- 黑色背景上白色星星和连线组成的星座图案
- 星星随音乐人声能量闪烁
- 连接线按节拍（85 BPM）出现和消失
- 整个星座从屏幕中心向外扩散，离中心越远移动越快
- 星星移出屏幕边界时在中心附近重新生成
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/fa054cf9c9ae4354862fc0dc10c1499d.png)

## 功能特点

星星亮度随人声音频能量变化（闪烁效果）
星星之间按节拍（85 BPM）在周围一定范围内随机生成连线
整体呈现从屏幕中心向外扩散的星空飞行效果
星星移动速度随位置变化（离中心越远速度越快）
输出16:9比例的视频（1920×1080）

## 程序进行的操作

1. 加载WAV音频文件
检测节拍位置（BPM=85）
计算人声频段（300-3000Hz）能量变化
归一化能量数据

2. 创建多个星星组（每组5-10个星星）
星星从屏幕中心向外扩散
星星亮度随人声音频能量变化
星星移出屏幕边界时在中心附近重新生成

3. 奇数拍：连接线逐渐变亮（透明度0→255）
偶数拍：连接线逐渐变暗（透明度255→0）
每次节拍变化时重新生成连接关系

## 参数说明
可以根据需要修改这些参数以获得不同的视觉效果：

### 基本参数
- `WIDTH`, `HEIGHT`: 视频分辨率（默认1920×1080）
- `FPS`: 视频帧率（默认30）
- `BPM`: 歌曲节拍（默认85）
- `BACKGROUND_COLOR`: 背景颜色（默认黑色）
- `STAR_COLOR`: 星星和连线颜色（默认白色）

### 星星参数
- `NUM_STAR_GROUPS`: 同时显示的星组数量（默认40）
- `STARS_PER_GROUP`: 每组星星数量（默认7）
- `MAX_STAR_RADIUS`: 星星最大半径（默认5）
- `MIN_STAR_RADIUS`: 星星最小半径（默认1）

### 运动参数
- `BASE_SPEED`: 基础移动速度（默认4.0）
- `MAX_SPEED`: 最大移动速度（默认12.0）
- 角度偏移范围：`random.uniform(-0.8, 0.8)`
- 距离偏移范围：`random.uniform(0.4, 1.6)`

### 连接线参数
- 连接概率：`random.random() < 0.45`（默认45%）
- 透明度变化速度：`255 * BPM / (60 * FPS)`

## 使用方法

### 安装依赖

```bash
pip install numpy pygame moviepy librosa imageio imageio-ffmpeg
```

### 运行程序

```bash
python audio_visualizer.py input.wav output.mp4
```

- `input.wav`: 输入的WAV音频文件
- `output.mp4`: 输出的视频文件

### 参数调整建议

1. **增加星星密度**：
   - 增大 `NUM_STAR_GROUPS`（例如50-60）
   - 增大 `STARS_PER_GROUP`（例如8-10）
   - 增加连接概率（例如0.5-0.6）

2. **增强运动效果**：
   - 增大 `BASE_SPEED`（例如5.0-6.0）
   - 增大 `MAX_SPEED`（例如15.0-20.0）
   - 扩大角度偏移范围（例如-1.0到1.0）

3. **改变视觉效果**：
   - 修改 `STAR_COLOR` 为其他颜色（例如淡蓝色 `(200, 230, 255)`)
   - 调整星星大小范围（`MIN_STAR_RADIUS` 和 `MAX_STAR_RADIUS`）
## 注意事项

1. 程序需要较长的运行时间（取决于音频长度和计算机性能）
2. 确保输入的音频文件是WAV格式
3. 输出视频文件大小可能较大（取决于音频长度）
4. 如需处理其他BPM的歌曲，请修改 `BPM` 参数
